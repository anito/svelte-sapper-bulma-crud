import{S as a,i as s,s as c,a as t,e,u as r,b as o,d as l,f as n,g as i,h,I as d,j as f,m as u,w as v,Q as p,y as m,t as g,n as E,o as b,J as y,M as $,v as k,R as I,z as C,D as T,r as D}from"./index.2b624af8.js";import{C as S}from"./Card.3934eb4f.js";function N(a,s,c){const t=Object.create(a);return t.item=s[c],t}function w(a){var s,c,t=a.error.message+"";return{c(){s=e("p"),c=r(t),this.h()},l(a){s=l(a,"P",{style:!0},!1);var e=n(s);c=o(e,t),e.forEach(i),this.h()},h(){T(s,"color","red")},m(a,t){f(a,s,t),v(s,c)},p(a,s){a.categories&&t!==(t=s.error.message+"")&&m(c,t)},d(a){a&&i(s)}}}function _(a){for(var s,c,d,u,p,m,g,E,b,y,$,k,I,C=a.list,T=[],S=0;S<C.length;S+=1)T[S]=x(N(a,C,S));return{c(){s=e("table"),c=e("thead"),d=e("tr"),u=e("th"),p=r("Name"),m=t(),g=e("th"),E=r("Description"),b=t(),y=e("th"),$=r("Actions"),k=t(),I=e("tbody");for(var a=0;a<T.length;a+=1)T[a].c();this.h()},l(a){s=l(a,"TABLE",{class:!0},!1);var t=n(s);c=l(t,"THEAD",{},!1);var e=n(c);d=l(e,"TR",{},!1);var r=n(d);u=l(r,"TH",{},!1);var h=n(u);p=o(h,"Name"),h.forEach(i),m=o(r,"\n            "),g=l(r,"TH",{},!1);var f=n(g);E=o(f,"Description"),f.forEach(i),b=o(r,"\n            "),y=l(r,"TH",{width:!0},!1);var v=n(y);$=o(v,"Actions"),v.forEach(i),r.forEach(i),e.forEach(i),k=o(t,"\n          "),I=l(t,"TBODY",{},!1);for(var C=n(I),D=0;D<T.length;D+=1)T[D].l(C);C.forEach(i),t.forEach(i),this.h()},h(){h(y,"width","100px"),h(s,"class","table is-striped is-hoverable")},m(a,t){f(a,s,t),v(s,c),v(c,d),v(d,u),v(u,p),v(d,m),v(d,g),v(g,E),v(d,b),v(d,y),v(y,$),v(s,k),v(s,I);for(var e=0;e<T.length;e+=1)T[e].m(I,null)},p(a,s){if(a.categories){C=s.list;for(var c=0;c<C.length;c+=1){const t=N(s,C,c);T[c]?T[c].p(a,t):(T[c]=x(t),T[c].c(),T[c].m(I,null))}for(;c<T.length;c+=1)T[c].d(1);T.length=C.length}},d(a){a&&i(s),D(T,a)}}}function x(a){var s,c,u,p,g,E,b,$,k,I,C,T,D,S,N,w,_,x=a.item.name+"",A=a.item.description+"";function V(){return a.click_handler(a)}function L(){return a.click_handler_1(a)}return{c(){s=e("tr"),c=e("td"),u=r(x),p=t(),g=e("td"),E=r(A),b=t(),$=e("td"),k=e("a"),I=e("span"),C=e("i"),T=t(),D=e("a"),S=e("span"),N=e("i"),w=t(),this.h()},l(a){s=l(a,"TR",{},!1);var t=n(s);c=l(t,"TD",{class:!0},!1);var e=n(c);u=o(e,x),e.forEach(i),p=o(t,"\n                      "),g=l(t,"TD",{class:!0},!1);var r=n(g);E=o(r,A),r.forEach(i),b=o(t,"\n                      "),$=l(t,"TD",{class:!0},!1);var h=n($);k=l(h,"A",{href:!0},!1);var d=n(k);I=l(d,"SPAN",{class:!0},!1);var f=n(I);C=l(f,"I",{class:!0},!1),n(C).forEach(i),f.forEach(i),d.forEach(i),T=o(h,"\n\n                          "),D=l(h,"A",{href:!0},!1);var v=n(D);S=l(v,"SPAN",{class:!0},!1);var m=n(S);N=l(m,"I",{class:!0},!1),n(N).forEach(i),m.forEach(i),v.forEach(i),h.forEach(i),w=o(t,"\n                  "),t.forEach(i),this.h()},h(){h(c,"class","col-name"),h(g,"class","col-description"),h(C,"class","fas fa-edit"),h(I,"class","icon is-small"),h(k,"href","javascript:;"),h(N,"class","fas fa-trash"),h(S,"class","icon is-large"),h(D,"href","javascript:;"),h($,"class","col-action"),_=[d(k,"click",V),d(D,"click",L)]},m(a,t){f(a,s,t),v(s,c),v(c,u),v(s,p),v(s,g),v(g,E),v(s,b),v(s,$),v($,k),v(k,I),v(I,C),v($,T),v($,D),v(D,S),v(S,N),v(s,w)},p(s,c){a=c,s.categories&&x!==(x=a.item.name+"")&&m(u,x),s.categories&&A!==(A=a.item.description+"")&&m(E,A)},d(a){a&&i(s),y(_)}}}function A(a){var s,c;return{c(){s=e("progress"),c=r("15%"),this.h()},l(a){s=l(a,"PROGRESS",{class:!0,max:!0},!1);var t=n(s);c=o(t,"15%"),t.forEach(i),this.h()},h(){h(s,"class","progress is-small is-primary"),h(s,"max","100")},m(a,t){f(a,s,t),v(s,c)},p:k,d(a){a&&i(s)}}}function V(a){var s,c,t;return{c(){s=e("a"),c=r("New"),this.h()},l(a){s=l(a,"A",{href:!0,slot:!0,class:!0},!1);var t=n(s);c=o(t,"New"),t.forEach(i),this.h()},h(){h(s,"href","javascript:;"),h(s,"slot","footer"),h(s,"class","card-footer-item"),t=d(s,"click",a.onNewClick)},m(a,t){f(a,s,t),v(s,c)},p:k,d(a){a&&i(s),t()}}}function L(a){var s,c,r;let h={ctx:a,current:null,token:null,pending:A,then:_,catch:w,value:"list",error:"error"};return I(c=a.categories,h),{c(){s=e("div"),h.block.c(),r=t()},l(a){s=l(a,"DIV",{},!1);var c=n(s);h.block.l(c),c.forEach(i),r=o(a,"\n    ")},m(a,c){f(a,s,c),h.block.m(s,h.anchor=null),h.mount=(()=>s),h.anchor=null,f(a,r,c)},p(s,t){a=t,h.ctx=a,"categories"in s&&c!==(c=a.categories)&&I(c,h)||h.block.p(s,C(C({},a),h.resolved))},d(a){a&&i(s),h.block.d(),h.token=null,h=null,a&&i(r)}}}function O(a){var s,c,$,k,I,C,T,D,N,w,_,x,A,O,j,B,P,R,H,U,M,z,F,G,J,Q,Y,q,K,W,X,Z,aa,sa,ca,ta=a.category.name+"",ea=new S({props:{title:"Categories",$$slots:{default:[L],footer:[V]},$$scope:{ctx:a}}});return{c(){s=t(),ea.$$.fragment.c(),c=t(),$=e("div"),k=e("div"),I=t(),C=e("div"),T=e("header"),D=e("p"),N=r(ta),w=t(),_=e("button"),x=t(),A=e("section"),O=e("div"),j=e("label"),B=r("Name"),P=t(),R=e("div"),H=e("input"),U=t(),M=e("div"),z=e("label"),F=r("Description"),G=t(),J=e("div"),Q=e("input"),Y=t(),q=e("footer"),K=e("button"),W=r("Save changes"),X=t(),Z=e("button"),aa=r("Cancel"),this.h()},l(a){s=o(a,"\n\n\n\n"),ea.$$.fragment.l(a),c=o(a,"\n\n"),$=l(a,"DIV",{class:!0},!1);var t=n($);k=l(t,"DIV",{class:!0},!1),n(k).forEach(i),I=o(t,"\n    "),C=l(t,"DIV",{class:!0},!1);var e=n(C);T=l(e,"HEADER",{class:!0},!1);var r=n(T);D=l(r,"P",{class:!0},!1);var h=n(D);N=o(h,ta),h.forEach(i),w=o(r,"\n            "),_=l(r,"BUTTON",{class:!0,"aria-label":!0},!1),n(_).forEach(i),r.forEach(i),x=o(e,"\n        "),A=l(e,"SECTION",{class:!0},!1);var d=n(A);O=l(d,"DIV",{class:!0},!1);var f=n(O);j=l(f,"LABEL",{class:!0},!1);var u=n(j);B=o(u,"Name"),u.forEach(i),P=o(f,"\n                "),R=l(f,"DIV",{class:!0},!1);var v=n(R);H=l(v,"INPUT",{class:!0,type:!0,placeholder:!0},!1),n(H).forEach(i),v.forEach(i),f.forEach(i),U=o(d,"\n          "),M=l(d,"DIV",{class:!0},!1);var p=n(M);z=l(p,"LABEL",{class:!0},!1);var m=n(z);F=o(m,"Description"),m.forEach(i),G=o(p,"\n            "),J=l(p,"DIV",{class:!0},!1);var g=n(J);Q=l(g,"INPUT",{class:!0,type:!0,placeholder:!0},!1),n(Q).forEach(i),g.forEach(i),p.forEach(i),d.forEach(i),Y=o(e,"\n        "),q=l(e,"FOOTER",{class:!0},!1);var E=n(q);K=l(E,"BUTTON",{class:!0},!1);var b=n(K);W=o(b,"Save changes"),b.forEach(i),X=o(E,"\n            "),Z=l(E,"BUTTON",{class:!0},!1);var y=n(Z);aa=o(y,"Cancel"),y.forEach(i),E.forEach(i),e.forEach(i),t.forEach(i),this.h()},h(){document.title="Categories",h(k,"class","modal-background"),h(D,"class","modal-card-title"),h(_,"class","delete"),h(_,"aria-label","close"),h(T,"class","modal-card-head"),h(j,"class","label"),h(H,"class","input"),h(H,"type","text"),h(H,"placeholder",""),h(R,"class","control"),h(O,"class","field"),h(z,"class","label"),h(Q,"class","input"),h(Q,"type","text"),h(Q,"placeholder",""),h(J,"class","control"),h(M,"class","field"),h(A,"class","modal-card-body"),h(K,"class",a.buttonSaveClass),h(Z,"class","button"),h(q,"class","modal-card-foot"),h(C,"class","modal-card"),h($,"class",a.modalClass),ca=[d(_,"click",a.closeModal),d(H,"input",a.input0_input_handler),d(Q,"input",a.input1_input_handler),d(K,"click",a.save),d(Z,"click",a.closeModal)]},m(t,e){f(t,s,e),u(ea,t,e),f(t,c,e),f(t,$,e),v($,k),v($,I),v($,C),v(C,T),v(T,D),v(D,N),v(T,w),v(T,_),v(C,x),v(C,A),v(A,O),v(O,j),v(j,B),v(O,P),v(O,R),v(R,H),p(H,a.category.name),v(A,U),v(A,M),v(M,z),v(z,F),v(M,G),v(M,J),v(J,Q),p(Q,a.category.description),v(C,Y),v(C,q),v(q,K),v(K,W),v(q,X),v(q,Z),v(Z,aa),sa=!0},p(a,s){var c={};(a.$$scope||a.categories)&&(c.$$scope={changed:a,ctx:s}),ea.$set(c),sa&&!a.category||ta===(ta=s.category.name+"")||m(N,ta),a.category&&H.value!==s.category.name&&p(H,s.category.name),a.category&&Q.value!==s.category.description&&p(Q,s.category.description),sa&&!a.buttonSaveClass||h(K,"class",s.buttonSaveClass),sa&&!a.modalClass||h($,"class",s.modalClass)},i(a){sa||(g(ea.$$.fragment,a),sa=!0)},o(a){E(ea.$$.fragment,a),sa=!1},d(a){a&&i(s),b(ea,a),a&&(i(c),i($)),y(ca)}}}async function j(){const a=await fetch("https://northwind.now.sh/api/categories");if(a.ok)return a.json();throw new Error(`ðŸš¨ Catastrofic failure ðŸš¨ ${a.status} ${a.statusText}`)}function B(a,s,c){let t,e,r=[],o={},l=!1,n=!1;function i(a){c("category",o=a),f()}async function h(a){c("category",o=a),confirm(`Delete "${o.name}"?`)&&(await http.delete(`/categories/${o.id}`),c("categories",r=j()))}function d(){c("modalIsVisible",n=!1)}function f(){c("modalIsVisible",n=!0)}return $(async()=>{c("categories",r=j())}),a.$$.update=((a={buttonSaveIsLoading:1,modalIsVisible:1})=>{a.buttonSaveIsLoading&&c("buttonSaveClass",t=!0===l?"button is-success is-loading":"button is-success"),a.modalIsVisible&&c("modalClass",e=!0===n?"modal is-active":"modal")}),{categories:r,category:o,onItemClick:i,onDeleteClick:h,closeModal:d,onNewClick:function(){c("category",o={name:"",description:""}),f()},save:async function(){try{c("buttonSaveIsLoading",l=!0),await http({method:o.id?"put":"post",url:o.id?`/categories/${o.id}`:"/categories",data:o}),c("categories",r=j()),d()}catch(a){console.log(a)}finally{c("buttonSaveIsLoading",l=!1)}},buttonSaveClass:t,modalClass:e,click_handler:function({item:a}){return i(a)},click_handler_1:function({item:a}){return h(a)},input0_input_handler:function(){o.name=this.value,c("category",o)},input1_input_handler:function(){o.description=this.value,c("category",o)}}}export default class extends a{constructor(a){super(),s(this,a,B,O,c,[])}}
